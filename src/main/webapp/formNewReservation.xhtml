<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:shiro="http://shiro.apache.org/tags"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="Template/template.xhtml">
    <ui:define name="title">#{I18N['reservation.form.new.title']}</ui:define>

    <ui:define name="content">
        <p:growl id="growl" showDetail="true" sticky="true" />

        <h:form id="form" prependId="false">
            <h:head>
                <title>#{I18N['reservation.form.new.title']}</title>
            </h:head>
            <h2 style="text-align:center">#{I18N['reservation.form.new.title']}</h2>

            <p:panelGrid id="newResForm" columns="3" columnClasses="col1Newrec,col2Newrec,col3Newrec">

                <!-- Article (prÃ©-rempli depuis la liste ou choisi ici si besoin) -->
                <p:outputLabel value="#{I18N['Articles.label.denomination']}"/>
                <h:panelGroup>
                    <h:outputText value="#{reservationBean.article.nom}"
                                  rendered="#{reservationBean.article ne null}" />
                    <p:selectOneMenu id="articleSelect"
                                     rendered="#{reservationBean.article eq null}"
                                     value="#{reservationBean.article}"
                                     converter="articleConverter"
                                     required="true"
                                     requiredMessage="#{I18N['formulaire.message.required.article']}">
                        <f:selectItems value="#{articleBean.readAll}"
                                       var="a"
                                       itemValue="#{a}"
                                       itemLabel="#{a.nom}" />
                    </p:selectOneMenu>
                </h:panelGroup>
                <h:message for="articleSelect" styleClass="errorMessage"/>

                <!-- Magasin (issu de la session; affichage-only) -->
                <p:outputLabel value="#{I18N['magasin.label.Nom']}"/>
                <h:outputText value="#{magasinBean.magasin.nom}" />
                <h:outputText value=""/>

                <!-- Client via code-barres -->
                <p:outputLabel value="#{I18N['utilisateur.label.NumMembre']}"/>
                <p:inputText id="numMembre"
                             value="#{reservationBean.numMembre}"
                             required="true"
                             maxlength="50"
                             requiredMessage="#{I18N['formulaire.message.required.CB']}" />
                <h:message for="numMembre" styleClass="errorMessage"/>

                <!-- Note prix -->
                <p:outputLabel value=""/>
                <h:outputText styleClass="hint"
                              value="#{I18N['reservation.note.prixCourant']}" />
                <h:outputText value=""/>
            </p:panelGrid>

            <h:panelGroup layout="block" styleClass="button-bar">
                <h:panelGroup styleClass="left-buttons">
                    <p:commandButton icon="pi pi-check-circle"
                                     value="#{I18N['application.button.validate']}"
                                     action="#{reservationBean.newReservation}"
                                     ajax="false"/>
                </h:panelGroup>
                <h:panelGroup styleClass="right-buttons">
                    <p:commandButton icon="pi pi-home"
                                     value="#{I18N['application.button.return']}"
                                     action="tableReservations.xhtml?faces-redirect=true"
                                     immediate="true"/>
                </h:panelGroup>
            </h:panelGroup>
        </h:form>
    </ui:define>
</ui:composition>
</html>
